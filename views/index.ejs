<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Roomie Chat</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="/styles.css" rel="stylesheet" type="text/css">
</head>

<body>

  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <h3>Roomies Now Online</h3>
    <% if (typeof online ==='object' && online) { %>
      <% if (online.length > 0) { %>
        <ul class="online">
          <% for (var i = 0; i < online.length; i++) {%>
          <li class="users">
            <span><%= online[i].roomie %></span>
          </li>
          <%}%>
        </ul>
      <% } %>
    <% } %>
  </div>

  <span id="nav" onclick="openNav()">&#9776; Who's Online</span>

  <div class="container">
    <div class="row header">
      <div id="app-title" class="col">
        Roomie Manager
      </div>
      <br>
      <div id="register" class="col">
        <form action="/online" method="POST">
          <input type="text" placeholder="Enter name..." name="roomie">
          <button type="submit">Submit</button>
        </form>
      </div>
    </div>

    <div class="row main">
      <div class="col-md-6">
        <h1 class="text-center">
          Roomie Chat
        </h1>
        <div id="status"></div>
        <div id="chat">
          <div class="card">
            <div id="messages" class="card-block">
            </div>
          </div>
          <input type="text" id="username" class="form-control" placeholder="Enter roomie...">
          <textarea id="textarea" class="form-control" placeholder="Enter message..."></textarea>
          <div id="enter">
            Press 'Enter' to Send
          </div>
          <br>
          <button id="clear" class="btn btn-danger">Clear Chat</button>
        </div>
      </div>

      <div class="col-md-6">
        <h1 id="chore-title" class="text-center">
          Chore Line-Up
        </h1>

        <div id="chores">

          <div id="chore1" class="col chore">
            <u>Dishes</u>-Empty or run dishwasher, wipe counters, put dishes in dishwasher
            <% if (typeof chore1 ==='object' && chore1) { %>
              <% if (chore1.length - 1 >= 0) { %>
                <div class="assigned"><%= chore1[chore1.length - 1].roomie %></div>
              <% } %>
            <% } %>
            <form action="/chore1" method="POST">
              <input type="text" placeholder="Roomie..." name="roomie">
              <button type="submit">Assign</button>
            </form>
          </div>

          <div id="chore2" class="col chore">
            <u>Trash</u>-Take out the trash and recycling bin (every Tuesday)
            <% if (typeof chore2 ==='object' && chore2) { %>
              <% if (chore2.length - 1 >= 0) { %>
                <div class="assigned"><%= chore2[chore2.length - 1].roomie %></div>
              <% } %>
            <% } %>
            <form action="/chore2" method="POST">
              <input type="text" placeholder="Roomie..." name="roomie">
              <button type="submit">Assign</button>
            </form>
          </div>

          <div id="chore3" class="col chore">
            <u>Floor</u>-Vacuum floor (once a week), mop as needed
            <% if (typeof chore3 ==='object' && chore3) { %>
              <% if (chore3.length - 1 >= 0) { %>
                <div class="assigned"><%= chore3[chore3.length - 1].roomie %></div>
              <% } %>
            <% } %>
            <form action="/chore3" method="POST">
              <input type="text" placeholder="Roomie..." name="roomie">
              <button type="submit">Assign</button>
            </form>
          </div>

          <div id="chore4" class="col chore">
            <u>Kitchen</u>-Wipe stove top and kitchen counter
            <% if (typeof chore4 ==='object' && chore4) { %>
              <% if (chore4.length - 1 >= 0) { %>
                <div class="assigned"><%= chore4[chore4.length - 1].roomie %></div>
              <% } %>
            <% } %>
            <form action="/chore4" method="POST">
              <input type="text" placeholder="Roomie..." name="roomie">
              <button type="submit">Assign</button>
            </form>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="footer">
    Made with â™¥ by Jessica Peng 2018.
  </div>

  <script src="/navbar.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
  <script src="/chatmanager.js" type="text/javascript">

</body>
</html>
